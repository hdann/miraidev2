module.exports.config={name:"allbox",version:"1.0.0",credits:"ManhG",hasPermssion:2,description:"[Ban/Unban/Remove] List[Data] thread bot đã tham gia",commandCategory:"Admin",usages:"[số trang/all]",cooldowns:5},module.exports.handleReply=async function({api:e,event:a,args:n,Threads:s,handleReply:t}){const{threadID:d,messageID:r}=a;if(parseInt(a.senderID)!==parseInt(t.author))return;const o=require("moment-timezone").tz("Asia/Ho_Chi_minh").format("HH:MM:ss L");var g=a.body.split(" "),u=t.groupid[g[1]-1],l=t.groupName[g[1]-1];switch(t.type){case"reply":if("ban"==g[0]||"Ban"==g[0]){const a=(await s.getData(u)).data||{};return a.banned=1,a.dateAdded=o,await s.setData(u,{data:a}),global.data.threadBanned.set(u,{dateAdded:a.dateAdded}),e.sendMessage("»Thông báo từ Admin«\n\n Nhóm Bạn Đã Bị Ban, cấm dùng bot.",u,(()=>e.sendMessage(`${e.getCurrentUserID()}`,(()=>e.sendMessage(`★★BanSuccess★★\n\n🔷${l} \n🔰TID:${u} `,d,(()=>e.unsendMessage(t.messageID)))))))}if("unban"==g[0]||"Unban"==g[0]||"ub"==g[0]||"Ub"==g[0]){const a=(await s.getData(u)).data||{};return a.banned=0,a.dateAdded=null,await s.setData(u,{data:a}),global.data.threadBanned.delete(u,1),e.sendMessage("»Thông báo từ Admin«\n\n Nhóm Bạn Đã Được Gỡ Ban",u,(()=>e.sendMessage(`${e.getCurrentUserID()}`,(()=>e.sendMessage(`★★UnbanSuccess★★\n\n🔷${l} \n🔰TID:${u} `,d,(()=>e.unsendMessage(t.messageID)))))))}if("del"==g[0]||"Del"==g[0]){const n=(await s.getData(u)).data||{};await s.delData(u,{data:n}),console.log(l),e.sendMessage(`★★DelSuccess★★\n\n🔷${l} \n🔰TID: ${u} \n Xóa data thành công!`,a.threadID,a.messageID);break}if("out"==g[0]||"Out"==g[0]){e.sendMessage("»Thông báo từ Admin«\n\n ★★Đã out khỏi nhóm chat★★",u,(()=>e.sendMessage(`${e.getCurrentUserID()}`,(()=>e.sendMessage(`★★OutSuccess★★\n\n🔷${l} \n🔰TID:${u} `,d,(()=>e.unsendMessage(t.messageID,(()=>e.removeUserFromGroup(`${e.getCurrentUserID()}`,u)))))))));break}}},module.exports.run=async function({api:e,event:a,args:n}){var s,t=[],d="";try{s=await e.getThreadList(1e3,null,["INBOX"])}catch(e){console.log(e)}for(const e of s)1==e.isGroup&&t.push({threadName:e.name,threadID:e.threadID,messageCount:e.messageCount});t.sort(((e,a)=>e.messageCount>a.messageCount?-1:e.messageCount<a.messageCount?1:void 0));var r=[],o=[],g=1;(g=parseInt(n[0])||1)<-1&&(g=1);for(var u=1e3,l=(d="🎭DS NHÓM [Data]🎭\n\n",Math.ceil(t.length/u)),h=u*(g-1);h<u*(g-1)+u&&!(h>=t.length);h++){let e=t[h];d+=`${h+1}. ${e.threadName}\n🔰TID: ${e.threadID}\n💌MessageCount: ${e.messageCount}\n`,r.push(e.threadID),o.push(e.threadName)}d+=`--Trang ${g}/${l}--\nDùng ${global.config.PREFIX}allbox + số trang/all\n\n`,e.sendMessage(d+"🎭Reply Out, Ban, Unban, Del[data] + số thứ tự để Out, Ban, Unban, Del[data] thread đó!",a.threadID,((e,n)=>global.client.handleReply.push({name:this.config.name,author:a.senderID,messageID:n.messageID,groupid:r,groupName:o,type:"reply"})))};